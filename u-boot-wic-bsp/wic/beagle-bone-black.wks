# short-description: Create SD card image with a boot partition
# long-description:
# Create an image that can be written onto an SD card using dd for use
# with beagle-bone-black.
# It uses MLO and u-boot.img
# uEnv.txt is in the rootfs /uEnv.txt
#
# The disk layout used is:
#  ----- --------- --------------
# | MLO | u-boot  |    rootfs    |
#  ----- --------- --------------
# ^     ^         ^              ^
# |     |         |              |
# 128K  384K      4M + rootfs + IMAGE_EXTRA_SPACE
#
part SPL --source rawcopy --sourceparams="file=MLO" --ondisk mmcblk --no-table --align 128
part u-boot --source rawcopy --sourceparams="file=u-boot.img" --ondisk mmcblk --no-table --align 384
part / --source rootfs --ondisk mmcblk --fstype=ext4 --label root --align 4096

# -->
###############################
#
# Y-AB:
# 
# source oe-init-build-env
#
# vim conf/auto.conf
#   MACHINE = "beagle-bone-black"
#
# wic create ../meta-mainline/u-boot-wic-bsp/wic/beagle-bone-black.wks -e core-image-minimal
#
##############################
# bitbake wic-tools
# wic create ../u-boot-wic-bsp/wic/am335x-phytec-wega-sd-card.wks -e core-image-minimal
# wic create ../am335x-phytec-wega-bsp/wic/am335x-phytec-wega-sd-card.wks -e core-image-minimal
# wic create ../meta-mainline/u-boot-wic-bsp/wic/am335x-phytec-wega-sd-card.wks -e core-image-minimal
# INFO: Creating image(s)...
#
# WARNING: bootloader config not specified, using defaults
#
# INFO: The new image(s) can be found here:
#  ./am335x-phytec-wega-sd-card-201706031949-mmcblk.direct
#
#The following build artifacts were used to create the image(s):
#  ROOTFS_DIR:                   /tmp/yocto-autobuilder/yocto-autobuilder/yocto-worker/poky-custom-pyro-multi-v7-core-image-minimal/build/tmp/work/am335x_phytec_wega_bsp-poky-linux-gnueabi/core-image-minimal/1.0-r0/rootfs
#  BOOTIMG_DIR:                  /tmp/yocto-autobuilder/yocto-autobuilder/yocto-worker/poky-custom-pyro-multi-v7-core-image-minimal/build/tmp/work/am335x_phytec_wega_bsp-poky-linux-gnueabi/core-image-minimal/1.0-r0/recipe-sysroot/usr/share
#  KERNEL_DIR:                   /tmp/yocto-autobuilder/yocto-autobuilder/yocto-worker/poky-custom-pyro-multi-v7-core-image-minimal/build/tmp/deploy/images/am335x-phytec-wega-bsp
#  NATIVE_SYSROOT:               /tmp/yocto-autobuilder/yocto-autobuilder/yocto-worker/poky-custom-pyro-multi-v7-core-image-minimal/build/tmp/work/am335x_phytec_wega_bsp-poky-linux-gnueabi/core-image-minimal/1.0-r0/recipe-sysroot-native
#
#INFO: The image(s) were created using OE kickstart file:
#  ../am335x-phytec-wega-bsp/wic/am335x-phytec-wega-sd-card.wks

