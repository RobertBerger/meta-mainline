setenv hostname mira-q

#setenv kernel_addr_r 0x12000000
setenv kernel_addr_r 0x10007fc0
setenv expand_bootfile 'setenv bootfile ${hostname}/uImage'

setenv fdt_addr_r 0x18000000
#setenv fdt_addr_r 0x20000000

====

#setenv fdt_addr_r 0x4f749000
setenv expand_fdtfile 'setenv fdtfile ${hostname}/uImage-imx6q-phytec-mira-rdk-nand.dtb'

===

setenv ipaddr 192.168.42.12
setenv serverip 192.168.42.1
setenv gatewayip 192.168.42.1
setenv netmask 255.255.255.0
#ethaddr 0:0:1:2:3:12
setenv netdev eth0

setenv fdt_high 0xffffffff


# --> uImage from tftp
setenv kernel_netload 'tftp ${kernel_addr_r} ${bootfile}'
# <-- uImage from tftp

# --> fdt from tftp
setenv fdt_netload 'tftp ${fdt_addr_r} ${fdtfile}'
# <-- fdt from tftp

# --> uImage and fdt from tftp
setenv netload 'run kernel_netload fdt_netload'
# <-- uImage and fdt from tftp

# --> generic bootargs
# default:
setenv bootargs 'console=ttymxc2,115200n8'
# bootgraph:
#bootargs=initcall_debug printk.time=y console=ttyO2,115200n8
# bootchart:
#bootargs=initcall_debug printk.time=y init=/sbin/bootchartd console=ttyO2,115200n8
# <-- generic bootargs

# --> rootfs from nfs
setenv nfsroot '/opt/poky/imx6q-phytec-mira-rdk-nand-rootfs'
setenv ips_to_bootargs 'setenv bootargs ${bootargs} ip=${ipaddr}:${serverip}:${gatewayip}:${netmask}:${hostname}:${netdev}:off'
setenv nfs_to_bootargs 'setenv bootargs ${bootargs} nfsroot=${serverip}:${nfsroot},v3,tcp'
#setenv default_to_bootargs 'setenv bootargs ${bootargs} noinitrd nohlt panic=1'
setenv default_to_bootargs 'setenv bootargs ${bootargs} noinitrd nohlt panic=1 earlyprintk=ttymxc1,115200n8'
setenv compose_nfs_bootargs 'run ips_to_bootargs; run nfs_to_bootargs; run default_to_bootargs'
setenv nfsboot 'echo Booting from nfs...; run compose_nfs_bootargs'

# --> bring up network
#netup=dcache off; usb start
#netup=usb start
# <-- bring up network

setenv compose_nfsboot 'run nfsboot'
# <-- rootfs from nfs

setenv compose_default 'run expand_bootfile; echo bootfile: ${bootfile}; run expand_fdtfile; echo fdtfile: ${fdtfile}; ping ${serverip}'
setenv uenvcmd 'run compose_default; run netload; run compose_nfsboot; printenv bootargs; bootm ${kernel_addr_r} - ${fdt_addr_r}'
